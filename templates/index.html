<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Calpalyn Instruction File Generator</title>
  <!-- Bulma CSS, Keen UI, Font Awesome, and Custom CSS -->
  <link href="{{ url_for('static', filename='css/bulma.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/keen-ui.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/base.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/font-awesome.min.css') }}" rel="stylesheet">
</head>

<body>

  <!-- Start of vform, mounted by VueJs -->
  <div id="vform">
    <ui-tabs v-cloak fullwidth>

      <!-- Landing Page -->
      <ui-tab title="Home">
        <box-container>
          <center><strong>About Calpalyn</strong></center>
          <br />
          <p>Descriptive paragraphs include details that appeal to the five senses: sight, taste, touch, smell, and hearing. In a descriptive paragraph, the writer must convey information that appeals to all the senses in order to give the best possible
            description to the reader. Descriptive paragraphs are commonly used in fiction and non-fiction writing to help immerse readers into the world of the author. Though there are no hard and fast rules for how exactly these paragraphs should be
            structured, there are several suggestions that can help you write an effective and appealing descriptive paragraph.</p>
        </box-container>
      </ui-tab>

      <!-- Main Graph Page -->
      <ui-tab title="Create Graph">

        <!-- Inputs -->
        <box-container>
          <!-- Section Select -->
          <div class="box">
            <h1 v-show="page <= maxPage && page >= minPage">
            <strong>Navigate Pages</strong>
            <select v-model="page" class="form-control">
                <option :value="pageNum" v-text="pageTitles[pageNum]" v-for="pageNum in maxPage"></option>
            </select>
          </h1>
            <br />
            <ui-button color="green" raised v-on:click="submitForm()">
              <i class="fa fa-save fa-fw"></i> Save Current Graph
            </ui-button>
            <ui-button color="green" raised v-on:click="generateFile()">
              <i class="fa fa-download fa-fw"></i> Generate Instruction File
            </ui-button>
            <br />
          </div>

          <h1 class="title"><strong>[[ pageTitles[page] ]]</strong></h1>
          <hr />

          <!-- Sections of Calpalyn -->
          <!-- Section 1 -->
          <div v-show="page === 1">
            <label class="label">Graph Title</label>
            <ui-alert :dismissible="false">Enter the title to appear above your graph. The graph title is also used when saving and loading graph selections.</ui-alert>
            <ui-textbox v-model="line25" placeholder="Enter a title"></ui-textbox>

            <label class="label">Vertical Label</label>
            <ui-alert :dismissible="false">Enter a label for the vertical axis (e.g. Depth cm).</ui-alert>
            <ui-textbox v-model="line24" placeholder="Enter a label"></ui-textbox>

            <label class="label">Vertical Interval</label>
            <ui-alert :dismissible="false">Enter the interval for the vertical axis (usually depths). Zero will automatically select a rounded interval every inch.</ui-alert>
            <ui-textbox v-model="line22Box3"></ui-textbox>

            <label class="label">Vertical Factor</label>
            <ui-alert :dismissible="false">Enter -1.0 to graph right-side up if you are using depths or ages as positive numbers. Enter 1 to leave numbers alone. This allows you to multiply the primary vertical axis (usually depths) by a factor.</ui-alert>
            <ui-textbox v-model="line1Box2"></ui-textbox>

            <label class="label">Graph Width</label>
            <ui-alert :dismissible="false">Enter a positive number to set the graph width in inches. Zero will automatically scale the graph to fit the page.</ui-alert>
            <ui-textbox v-model="line22Box2"></ui-textbox>

            <label class="label">Graph Height</label>
            <ui-alert :dismissible="false">Enter a positive number to set the graph height in inches. Zero will automatically scale the graph to fit the page.</ui-alert>
            <ui-textbox v-model="line22Box1"></ui-textbox>

            <label class="label">Font Size</label>
            <ui-alert :dismissible="false">Standard fonts are more likely to fit the page. Enlarged fonts are 12 point.</ui-alert>
            <ui-select v-model="line21Box4" :options="['Standard', 'Enlarged']"></ui-select>

            <label class="label">Data Lines</label>
            <ui-alert :dismissible="false">Generate horizontal dotted lines at data levels. Lines can be used to show the sampling interval.</ui-alert>
            <ui-select v-model="line21Box1" :options="['Yes', 'No']"></ui-select>
          </div>

          <!-- Section 2 -->
          <div v-show="page === 2">
            <ul>
              <label class="label">Data File</label>
              <ui-alert :dismissible="false">Your data file contains all the actual data to be graphed. Create your file in Excel and save as a .csv file. The first cell should contain two numbers separated by a space. The first number indicates the number of rows and the second number indicates the number of columns. Note that both of these numbers must be entered as one less than the actual number of rows and columns in the file because the numbers indicate the number of rows and columns of actual data and disregards the initial cell as metadata. The rest of the first column should be filled with data levels (usually depths). The numbers in the first row should match the numbers identifying each taxon in the taxa file. All other boxes are filled with your actual data.</ui-alert>
              <li>
                <ui-fileupload raised @change="uploadDataFile" label="Choose a data file" color="primary" name="dataFile"></ui-fileupload>
              </li>
              <br />

              <label class="label">Taxa File</label>
              <ui-alert :dismissible="false">Your taxa file contains identifying numbers that correspond to the text labels that will appear on your graph. Negative numbers are usually reserved for pre-calculated sums and normalization factors. If you are starting from scratch, you may want to simply copy and modify the provided example taxa file. The taxa file can be edited in any text editor, but make sure to save the file with a .taxa file extension.</ui-alert>
              <li>
                <ui-fileupload raised @change="uploadTaxaFile" label="Choose a taxa file" color="primary" name="taxaFile"></ui-fileupload>
              </li>
              <br />

            </ul>

          </div>

          <!-- Section 3 -->
          <div v-show="page === 3">
            <ui-alert :dismissible="false">
              These subtotals can be used to normalize data. For example, they allow you to graph as a percent of total pollen or as a percent of non-aquatic pollen.
              <br />
              <br /> Without subtotals you can only graph raw data. You may add up to seven subtotals.
            </ui-alert>

            <div class="box">

              <h1 class="title"><Center>Add & Edit Subtotals<Center></h1>
              <table class="table is-bordered">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Subtotal</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-show="line3Box2.length !== 0" :class="cssClass('1', currSumNum)">
                    <td v-text="1"></td>
                    <td v-text="sumNames[0]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '1'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box3.length !== 0" :class="cssClass('2', currSumNum)">
                    <td v-text="2"></td>
                    <td v-text="sumNames[1]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '2'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box4.length !== 0" :class="cssClass('3', currSumNum)">
                    <td v-text="3"></td>
                    <td v-text="sumNames[2]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '3'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box5.length !== 0" :class="cssClass('4', currSumNum)">
                    <td v-text="4"></td>
                    <td v-text="sumNames[3]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '4'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box6.length !== 0" :class="cssClass('5', currSumNum)">
                    <td v-text="5"></td>
                    <td v-text="sumNames[4]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '5'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box7.length !== 0" :class="cssClass('6', currSumNum)">
                    <td v-text="6"></td>
                    <td v-text="sumNames[5]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '6'">Edit</ui-button>
                    </td>
                  </tr>
                  <tr v-show="line3Box8.length !== 0" :class="cssClass('7', currSumNum)">
                    <td v-text="7"></td>
                    <td v-text="sumNames[6]"></td>
                    <td>
                      <ui-button color="secondary" raised @click="currSumNum = '7'">Edit</ui-button>
                    </td>
                  </tr>
                </tbody>
              </table>

              <div v-show="currSumNum !== '-1'">
                <section class="section" v-show="currSumNum === '1'">
                  <h1 class="title"><Center>Subtotal 1<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[0]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box2" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box2 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box2 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '2'">
                  <h1 class="title"><Center>Subtotal 2<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[1]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box3" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box3 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box3 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '3'">
                  <h1 class="title"><Center>Subtotal 3<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[2]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box4" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box4 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box4 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '4'">
                  <h1 class="title"><Center>Subtotal 4<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[3]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box5" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box5 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box5 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '5'">
                  <h1 class="title"><Center>Subtotal 5<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[4]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box6" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box6 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box6 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '6'">
                  <h1 class="title"><Center>Subtotal 6<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[5]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box7" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box7 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box7 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>

                <section class="section" v-show="currSumNum === '7'">
                  <h1 class="title"><Center>Subtotal 7<Center></h1>

                  <label class="label">Subtotal Name</label>
                  <ui-alert :dismissible="false">Enter a name for the subtotal.</ui-alert>
                  <ui-textbox v-model="sumNames[6]"></ui-textbox>

                  <label class="label">Taxa to Sum</label>
                  <ui-alert :dismissible="false">Choose the taxa you want to sum.</ui-alert>
                  <ui-select multiple has-search multiple-delimiter=", " v-model="line3Box8" placeholder="Please select taxa" :options="taxaPosFiltered"></ui-select>
                  <div class="container">
                    <ui-button color="secondary" raised @click="line3Box8 = taxaPosFiltered">Select All</ui-button>
                    <ui-button color="secondary" raised @click="line3Box8 = []">Clear</ui-button>
                  </div>
                  <br />
                </section>
                <ui-button v-if="this.currSumNum !== '-1'" color="primary" @click="addSum()" :disabled="addSumDisabled">Done</ui-button>
              </div>
            </div>
          </div>

          <!-- Section 4 -->
          <div v-show="page === 4">
            <ui-alert :dismissible="false">
              Choose taxa you want to graph and choose formatting options.
            </ui-alert>

            <div class="box">
              <h1 class="title"><Center>Add & Edit Taxa to Graph<Center></h1>
              <table class="table is-bordered">
                <thead>
                  <tr>
                    <th>Taxon</th>
                    <th>Normalization Subtotal</th>
                    <th v-if="plots.length != 0">Actions</th>
                    <th v-if="plots.length != 0">Order</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(plot, i) in plots" :class="cssClass(plot, currPlot)">
                    <td v-text="plot.line20Box1"></td>
                    <td v-text="plot.line20Box3.label"></td>
                    <td>
                      <ui-button color="secondary" raised @click="changeRow(plot, plotFields, 'currPlot')">Edit</ui-button>
                      <ui-button color="secondary" raised @click="removeRow(plot, 'plots', 'currPlot')">Delete</ui-button>
                    </td>
                    <td>
                      <ui-button color="secondary" raised @click="swapRows('plots', i, i-1)"><i class="fa fa-arrow-up"></i></ui-button>
                      <ui-button color="secondary" raised @click="swapRows('plots', i, i+1)"><i class="fa fa-arrow-down"></i></ui-button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <section class="section">
                <label class="label">Taxon</label>
                <ui-alert :dismissible="false">Choose the taxon (i.e. a pollen type such as Pinus) you would like to plot.</ui-alert>
                <ui-select has-search v-model="line20Box1" placeholder="Please select an option" :options="taxaPosFiltered"></ui-select>

                <label class="label">Plot Type</label>
                <ui-alert :dismissible="false">Choose how you would like to plot this taxon.</ui-alert>
                <ui-select v-model="line20ABox6" placeholder="Please select an option" :options="['Sawtooth', 'Bar']"></ui-select>

                <label class="label">Normalization Subtotal</label>
                <ui-alert :dismissible="false">Choose the subtotal to be used for normalizing this taxon. If you want to plot as raw data, leave blank.</ui-alert>
                <ui-select has-search v-model="line20Box3" placeholder="Please select an option" :options="normalizationSums"></ui-select>

                <label class="label">Normalization Method</label>
                <ui-alert :dismissible="false">Choose how you would you like to normalize this taxon.
                  <br />
                  <br />
                  <ul>
                    <li><strong>Option 1: </strong>Calculate percentage of subtotal</li>
                    <li><strong>Option 2: </strong>Multiply taxon by 100 (allows expression of ratio data as percentages)</li>
                    <li><strong>Option 3: </strong>Leave as raw data</li>
                    <li><strong>Option 4: </strong>Divide by subtotal plus taxon being graphed</li>
                    <li><strong>Option 5: </strong>Divide by subtotal minus taxon being graphed</li>
                    <li><strong>Option 6: </strong>Divide by subtotal</li>
                    <li><strong>Option 7: </strong>Calculate percentage of subtotal plus taxon being graphed</li>
                    <li><strong>Option 8: </strong>Calculate percentage of subtotal minus taxon being graphed</li>
                    <li><strong>Option 9: </strong>Multiply by subtotal</li>
                  </ul>
                </ui-alert>
                <ui-select v-model="line20Box2" placeholder="Please select an option" :options="['Option 1', 'Option 2', 'Option 3', 'Option 4', 'Option 5', 'Option 6', 'Option 7', 'Option 8', 'Option 9']"></ui-select>

                <label class="label">Taxon Group</label>
                <ui-alert :dismissible="false">Make a selection if you want your graph to indicate taxon groups with labeled brackets at the top.</ui-alert>
                <ui-select v-model="line20ABox2" placeholder="Please select an option" :options="['No Group', 'Trees', 'Shrubs', 'Herbs', 'Ferns', 'Aquatics', 'Herbs and Shrubs']"></ui-select>

                <label class="label">Horizontal Scale</label>
                <ui-alert :dismissible="false">Leave blank to automatically choose the horizontal interval or enter the actual units for the horizontal interval manually. The smaller the number you enter the more space this taxon curve will take up. Getting this right can take some trial and error. You may want to keep adjusting until all the taxa graphed take up similar space or you may want to make all the horizontal intervals the same to make plots true to scale.</ui-alert>
                <ui-textbox v-model="line20Box5"></ui-textbox>

                <div v-show="line20ABox6 === 'Sawtooth'">
                  <label class="label">Five Times Curve</label>
                  <ui-alert :dismissible="false">The five times curve/bars can be used to make a taxon visible if the numbers are very small compared to another taxon on your graph.</ui-alert>
                  <ui-select v-model="line20Box4" placeholder="Please select an option" :options="['No', 'Yes']"></ui-select>
                </div>

                <label class="label">Horizontal Axis Label</label>
                <ui-alert :dismissible="false">Choose a label to place below the taxon being graphed. There is not always enough room to place a label below every taxon graphed. It is best to use one or two labels that apply to several plotted taxa (e.g. % non-aquatic pollen).</ui-alert>
                <ui-textbox v-model="line20Box6"></ui-textbox>

                <div v-show="line20ABox6 === 'Sawtooth'">
                  <h1 class="title">Sawtooth Options</h1>

                  <label class="label">Curve Fill</label>
                  <ui-alert :dismissible="false">Decide how you want to shade in the area under your curves.</ui-alert>
                  <ui-select v-model="line20ABox3" placeholder="Please select an option" :options="['None', 'Black', 'Lines', 'Greyscale']"></ui-select>

                  <label v-show="line20ABox3 === 'Lines' || line20ABox3 === 'Greyscale'" class="label">Fill Density</label>
                  <ui-alert v-show="line20ABox3 === 'Lines' || line20ABox3 === 'Greyscale'" :dismissible="false">Choose the fill density for the area under curve. If greyscale is chosen, numbers 0 through 10 indicate shades of grey: 0 is black, 10 is white. If lines are chosen, numbers 0 through 10 indicate the number of lines: 0 is sparse, 10 is dense. </ui-alert>
                  <ui-select v-show="line20ABox3 === 'Lines' || line20ABox3 === 'Greyscale'" v-model="line20ABox5" placeholder="Please select an option" :options="['0','1','2','3','4','5','6','7','8','9','10']"></ui-select>

                  <label v-show="line20ABox3 === 'Lines'" class="label">Line Angel</label>
                  <ui-alert v-show="line20ABox3 === 'Lines'" :dismissible="false">Choose angle of lines used to fill area under curve (e.g. 0 for horizontal, 45 for diagonal etc.).</ui-alert>
                  <ui-textbox v-show="line20ABox3 === 'Lines'" v-model="line20ABox4"></ui-textbox>

                </div>
              </section>
              <ui-button v-show="currPlot === undefined" color="primary" @click="addRow(plotFields, 'plots', 'currPlot')">Add Taxon to Graph</ui-button>
              <ui-button v-show="currPlot !== undefined" color="primary" @click="updateRow(currPlot, plotFields, 'plots', 'currPlot')">Apply Changes</ui-button>
            </div>
          </div>

          <!-- Section 5 -->
          <div v-show="page === 5">
            <label class="label">Draw Chronology Column</label>
            <ui-alert :dismissible="false">Create a chronology column to show your age model.
              <br />
              <br />
              <ul>
                <li><strong>Option 1:</strong> Draw chronology column and merge it with any stratigraphy graphics at left of diagram</li>
                <li><strong>Option 2:</strong> Draw scaled chronology column with tick marks at fixed time intervals along the left side of the column</li>
              </ul>
            </ui-alert>
            <ui-select vertical="true" :options="['No', 'Option 1', 'Option 2']" v-model="line21Box3"></ui-select>

            <div v-show="line21Box3 !== 'No'">
              <label class="label">Chronology Label</label>
              <ui-alert :dismissible="false">Enter a label to go below the chronology column (e.g. Cal years BP).</ui-alert>
              <ui-textbox v-model="line26A" placeholder="Enter a label"></ui-textbox>

              <label class="label">Chronology Numbering</label>
              <ui-alert :dismissible="false">Enter 0 for a rounded interval approximately equal to one-fiftieth of your oldest date. Number labels are placed once every five tick marks. Enter a positive number to choose your own interval (spacing of ticks) in years.</ui-alert>
              <ui-textbox v-model="line22Box4"></ui-textbox>

              <!-- Dates -->
              <div class="box">
                <h1 class="title"><Center>Add & Edit Dates<Center></h1>
                <table class="table is-bordered">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Depth</th>
                      <th v-if="dates.length != 0">Actions</th>
                      <th v-if="dates.length != 0">Order</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="(date, i) in dates" :class="cssClass(date, currDate)">
                      <td v-text="date.line26Box3"></td>
                      <td v-text="date.line26Box1"></td>
                      <td>
                        <ui-button color="secondary" raised @click="changeRow(date, dateFields, 'currDate')">Edit</ui-button>
                        <ui-button color="secondary" raised @click="removeRow(date, 'dates', 'currDate')">Delete</ui-button>
                      </td>
                      <td>
                        <ui-button color="secondary" raised @click="swapRows('dates', i, i-1)"><i class="fa fa-arrow-up"></i></ui-button>
                        <ui-button color="secondary" raised @click="swapRows('dates', i, i+1)"><i class="fa fa-arrow-down"></i></ui-button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <section class="section">
                  <label class="label">Date</label>
                  <ui-alert :dismissible="false">Enter date in years BP. Years since 1950 should be negative.</ui-alert>
                  <ui-textbox v-model="line26Box3"></ui-textbox>

                  <label class="label">Midpoint Depth</label>
                  <ui-alert :dismissible="false">Enter the midpoint depth of the dated sample. Depths must be ordered from top to bottom.</ui-alert>
                  <ui-textbox v-model="line26Box1"></ui-textbox>

                  <label class="label">Vertical Thickness</label>
                  <ui-alert :dismissible="false">Enter the vertical thickness of the area sampled for date. This can be left blank.</ui-alert>
                  <ui-textbox v-model="line26Box2"></ui-textbox>

                  <label class="label">Years Uncertainty</label>
                  <ui-alert :dismissible="false">Enter an error for date (integer). This can be left blank if you do not want to display errors on the column.</ui-alert>
                  <ui-textbox v-model="line26Box4"></ui-textbox>

                  <label class="label">Substance Label</label>
                  <ui-alert :dismissible="false">Enter a label for the substance dated. This is usually left blank. </ui-alert>
                  <ui-textbox v-model="line26Box5"></ui-textbox>
                </section>
                <ui-button v-show="currDate === undefined" color="primary" @click="addRow(dateFields, 'dates', 'currDate')" :disabled="line26Box1 === '' || line26Box3 === ''">Add Date</ui-button>
                <ui-button v-show="currDate !== undefined" color="primary" @click="updateRow(currDate, dateFields, 'dates', 'currDate')" :disabled="line26Box1 === '' || line26Box3 === ''">Apply Changes</ui-button>
              </div>
            </div>
          </div>

          <!-- Section 6 -->
          <div v-show="page === 6">
            <label class="label">Draw Stratigraphy Column</label>
            <ui-alert :dismissible="false">Create a column to show the stratigraphic zones in your core.
              <br />
              <br />
              <ul>
                <li><strong>Option 1:</strong> Draw stratigraphy column and merge it with any chronology graphics at left of diagram</li>
                <li><strong>Option 2:</strong> Draw stratigraphy column, omit stratigraphy labels, and draw boxes with labels identifying each fill pattern below the diagram</li>
              </ul>
            </ui-alert>
            <ui-select vertical="true" :options="['No', 'Option 1', 'Option 2']" v-model="line21Box2"></ui-select>

            <!-- Zones -->
            <div v-show="line21Box2 !== 'No'">
              <div class="box">
                <h1 class="title"><Center>Add & Edit Zones<Center></h1>
                <table class="table is-bordered">
                  <thead>
                    <tr>
                      <th>Position</th>
                      <th>Label</th>
                      <th v-if="zones.length != 0">Actions</th>
                      <th v-if="zones.length != 0">Order</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="(zone, i) in zones" :class="cssClass(zone, currZone)">
                      <td v-text="zone.line27Box1"></td>
                      <td v-text="zone.line27Box4"></td>
                      <td>
                        <ui-button color="secondary" raised @click="changeRow(zone, zoneFields, 'currZone')">Edit</ui-button>
                        <ui-button color="secondary" raised @click="removeRow(zone, 'zones', 'currZone')">Delete</ui-button>
                      </td>
                      <td>
                        <ui-button color="secondary" raised @click="swapRows('zones', i, i-1)"><i class="fa fa-arrow-up"></i></ui-button>
                        <ui-button color="secondary" raised @click="swapRows('zones', i, i+1)"><i class="fa fa-arrow-down"></i></ui-button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <section class="section">
                  <label class="label">Upper Bound Position</label>
                  <ui-alert :dismissible="false">Enter a number for the upper position of this stratigraphic zone. Use the same units as the first column of your data file (usually depths). Positions must be ordered from top to bottom.</ui-alert>
                  <ui-textbox v-model="line27Box1"></ui-textbox>

                  <label class="label">Boundary Type</label>
                  <ui-alert :dismissible="false">Choose the boundary line style.</ui-alert>
                  <ui-select v-model="line27Box2" placeholder="Please select an option" :options="['Single solid line', 'Single jagged line (nonconformity)', 'Double jagged line (discontinuous core)']"></ui-select>

                  <label class="label">Shading</label>
                  <ui-alert :dismissible="false">Numbers 0 through 10 indicate shades of grey: 0 is black, 10 is white. </ui-alert>
                  <ui-select v-model="line27Box3" placeholder="Please select an option" :options="['0','1','2','3','4','5','6','7','8','9','10']"></ui-select>

                  <label class="label">Stratigraphy Label</label>
                  <ui-alert :dismissible="false">Enter a text label for the stratigraphic zone.</ui-alert>
                  <ui-textbox v-model="line27Box4" placeholder="Enter a label"></ui-textbox>
                </section>
                <ui-button v-show="currZone === undefined" color="primary" @click="addRow(zoneFields, 'zones', 'currZone')" :disabled="line27Box1 === '' || line27Box2 === ''">Add Zone</ui-button>
                <ui-button v-show="currZone !== undefined" color="primary" @click="updateRow(currZone, zoneFields, 'zones', 'currZone')" :disabled="line27Box1 === '' || line27Box2 === ''">Apply Changes</ui-button>
              </div>
            </div>
          </div>

          <!-- Section 7 -->
          <div v-show="page === 7">
            <label class="label">Draw Zonation Lines</label>
            <ui-alert :dismissible="false">Use zonation lines to highlight periods of interest within graph. For instance, you could use lines to show cool and warm phases.</ui-alert>
            <ui-select v-model="line23Box1" :options="['Yes', 'No']"></ui-select>

            <!-- Lines -->
            <div v-show="line23Box1 == 'Yes'">
              <div class="box">
                <h1 class="title"><Center>Add & Edit Zone Lines<Center></h1>
                <table class="table is-bordered">
                  <thead>
                    <tr>
                      <th>Position</th>
                      <th>Type</th>
                      <th v-if="lines.length != 0">Actions</th>
                      <th v-if="lines.length != 0">Order</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="(line, i) in lines"  :class="cssClass(line, currLine)">
                      <td v-text="line.line30Box1"></td>
                      <td v-text="line.line30Box2"></td>
                      <td>
                        <ui-button color="secondary" raised @click="changeRow(line, lineFields, 'currLine')">Edit</ui-button>
                        <ui-button color="secondary" raised @click="removeRow(line, 'lines', 'currLine')">Delete</ui-button>
                      </td>
                      <td>
                        <ui-button color="secondary" raised @click="swapRows('lines', i, i-1)"><i class="fa fa-arrow-up"></i></ui-button>
                        <ui-button color="secondary" raised @click="swapRows('lines', i, i+1)"><i class="fa fa-arrow-down"></i></ui-button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <section class="section">
                  <label class="label">Zone Line Position</label>
                  <ui-alert :dismissible="false">Enter a number for the position of this zone line. Use the same units as the first column of your data file (usually depths). Positions must be ordered from top to bottom.</ui-alert>
                  <ui-textbox v-model="line30Box1"></ui-textbox>

                  <label class="label">Zone Line Style</label>
                  <ui-alert :dismissible="false">Choose the type of zone. This will determine the styling. Zones use solid lines. Subzones use dashed lines. </ui-alert>
                  <ui-select v-model="line30Box2" placeholder="Please select an option" :options="['Zone', 'Subzone']"></ui-select>
                </section>
                <ui-button v-show="currLine === undefined" color="primary" @click="addRow(lineFields, 'lines', 'currLine')" :disabled="line30Box1 === '' || line30Box2 === ''">Add Line</ui-button>
                <ui-button v-show="currLine !== undefined" color="primary" @click="updateRow(currLine, lineFields, 'lines', 'currLine')" :disabled="line30Box1 === '' || line30Box2 === ''">Apply Changes</ui-button>
              </div>
            </div>
          </div>
          <!-- End Pages for Calpalyn -->

          <!-- Forward / Back -->
          <br>
          <div v-if="page < maxPage && page > 1">
            <ui-button raised v-on:click="previousPage" class="button">Previous</ui-button>
            <ui-button raised v-on:click="nextPage" class="button">Next</ui-button>
          </div>
          <div v-else-if="page == maxPage">
            <ui-button raised v-on:click="previousPage" class="button">Previous</ui-button>
          </div>
          <div v-else-if="page == 1">
            <ui-button raised v-on:click="nextPage" class="button">Next</ui-button>
          </div>
          <!-- End Forward / Back -->

        </box-container>
      </ui-tab>
      <!-- End of Graphing Page -->

      <!-- Saved Graphs Page -->
      <ui-tab title="Load Graphs">
        <box-container>
          <h1 class="title">
            <strong>Saved Graphs</strong>
          </h1>
          <strong>Graphs</strong>
          <select v-model="loadedForm" class="select">
            <option v-for="f in formsData" :value="f" class="ui-select-option">[[ f.line25.toString() ]]</option>
          </select>
          <br />
          <br />
          <ui-button raised v-on:click="loadForm()" color="primary"> Load </ui-button>
        </box-container>
      </ui-tab>
      <!-- End Saved Graphs Page -->
    </ui-tabs>
    <!-- End of Tabs -->
    <footer class="footer">
      <div class="container">
        <div class="content has-text-centered">
          <p>
            <strong>Calpalyn Instruction File Generator</strong> by Marcel Champagne</a>. Icons provided by <a href="https://icons8.com/">Icons8</a> and <a href="http://fontawesome.io/">Font Awesome</a>.
          </p>
          <p>
            <a class="icon" href="https://github.com/mnaircckel/calpalyn-web-gen">
              <i class="fa fa-github"></i>
            </a>
          </p>
        </div>
      </div>
    </footer>
  </div>
  <!-- End of vform -->
  <!--Axios -->
  <script src="{{ url_for('static', filename='js/axios.min.js') }}"></script>
  <!-- Vue and Keen UI -->
  <script src="{{ url_for('static', filename='js/vue.js') }}"></script>
  <script src="{{ url_for('static', filename='js/keen-ui.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>
